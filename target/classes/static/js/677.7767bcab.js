"use strict";(self["webpackChunkyy2"]=self["webpackChunkyy2"]||[]).push([[677],{6245:function(e,a,l){function o(e){this.message=e}o.prototype=new Error,o.prototype.name="InvalidCharacterError";var t="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var a=String(e).replace(/=+$/,"");if(a.length%4==1)throw new o("'atob' failed: The string to be decoded is not correctly encoded.");for(var l,t,n=0,r=0,u="";t=a.charAt(r++);~t&&(l=n%4?64*l+t:t,n++%4)?u+=String.fromCharCode(255&l>>(-2*n&6)):0)t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t);return u};function n(e){var a=e.replace(/-/g,"+").replace(/_/g,"/");switch(a.length%4){case 0:break;case 2:a+="==";break;case 3:a+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(t(e).replace(/(.)/g,(function(e,a){var l=a.charCodeAt(0).toString(16).toUpperCase();return l.length<2&&(l="0"+l),"%"+l})))}(a)}catch(e){return t(a)}}function r(e){this.message=e}function u(e,a){if("string"!=typeof e)throw new r("Invalid token specified");var l=!0===(a=a||{}).header?0:1;try{return JSON.parse(n(e.split(".")[l]))}catch(e){throw new r("Invalid token specified: "+e.message)}}r.prototype=new Error,r.prototype.name="InvalidTokenError",a.Z=u},1863:function(e,a,l){l.r(a),l.d(a,{default:function(){return Z}});var o=l(2876),t=(l(2278),l(6907)),n=(l(4746),l(5185)),r=(l(3349),l(8136)),u=(l(2219),l(4385)),i=(l(5077),l(3164)),s=(l(6335),l(7961)),c=(l(1605),l(1116)),d=(l(8825),l(294)),m=(l(6870),l(1206)),v=(l(103),l(6233)),p=(l(9840),l(2406)),h=(l(6615),l(6252));const f={style:{"--van-nav-bar-icon-color":"#f19290"}},w={class:"page-container"},g={class:"add_produce"},k={style:{display:"flex","justify-content":"center","align-items":"center"}},b=["src"],y=(0,h._)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0,user-scalable=no"},null,-1),C={class:"footer_produce"};function _(e,a,l,_,x,V){const I=p.l2,W=v.j,P=m.oF,H=d.JO,U=c.gb,T=s.Qm,Z=i.gN,L=u.cW,N=r.GI,S=n.l0,j=t.zx,F=o.Vq;return(0,h.wg)(),(0,h.iD)(h.HY,null,[(0,h._)("div",f,[(0,h.Wm)(I,{title:"æ·»åŠ å•†å“","left-text":"","left-arrow":"",onClickLeft:_.onClickLeft},null,8,["onClickLeft"])]),(0,h._)("div",w,[(0,h._)("div",g,[(0,h.Wm)(P,{autoplay:3e3,"indicator-color":"#F19290","lazy-render":""},{default:(0,h.w5)((()=>[((0,h.wg)(!0),(0,h.iD)(h.HY,null,(0,h.Ko)(_.images,(e=>((0,h.wg)(),(0,h.j4)(W,{key:e},{default:(0,h.w5)((()=>[(0,h._)("div",k,[(0,h._)("img",{src:e,class:"image-slider",alt:"å•†å“å›¾ç‰‡"},null,8,b)])])),_:2},1024)))),128))])),_:1}),_.isLoading?((0,h.wg)(),(0,h.j4)(U,{key:0,vertical:"",class:"loading-overlay"},{icon:(0,h.w5)((()=>[(0,h.Wm)(H,{name:"star-o",size:"30"})])),default:(0,h.w5)((()=>[(0,h.Uk)(" åŠ è½½ä¸­... ")])),_:1})):(0,h.kq)("",!0),(0,h.Wm)(S,{class:"form-container_produceAdd"},{default:(0,h.w5)((()=>[y,(0,h.Wm)(T,{modelValue:_.fileList,"onUpdate:modelValue":a[0]||(a[0]=e=>_.fileList=e),"after-read":_.afterRead,"upload-text":"å•†å“å›¾ç‰‡",reupload:"","max-count":"1"},null,8,["modelValue","after-read"]),(0,h.Wm)(Z,{modelValue:_.presetIndex,"onUpdate:modelValue":a[1]||(a[1]=e=>_.presetIndex=e),"is-link":"",readonly:"",label:"ðŸ”–é€‰æ‹©é¢„è®¾",placeholder:"é€‰æ‹©é¢„è®¾",onClick:a[2]||(a[2]=e=>_.showPicker=!0)},null,8,["modelValue"]),(0,h.Wm)(N,{show:_.showPicker,"onUpdate:show":a[4]||(a[4]=e=>_.showPicker=e),round:"",position:"bottom "},{default:(0,h.w5)((()=>[(0,h.Wm)(L,{columns:_.columns,onCancel:a[3]||(a[3]=e=>_.showPicker=!1),onConfirm:_.onConfirm},null,8,["columns","onConfirm"])])),_:1},8,["show"]),(0,h.Wm)(Z,{label:"ðŸ“Œå•†å“åç§°",modelValue:_.title,"onUpdate:modelValue":a[5]||(a[5]=e=>_.title=e),placeholder:"è¯·è¾“å…¥å•†å“åç§°",clearable:""},null,8,["modelValue"]),(0,h.Wm)(Z,{label:"ðŸ“å•†å“è¯¦æƒ…",modelValue:_.desc,"onUpdate:modelValue":a[6]||(a[6]=e=>_.desc=e),placeholder:"è¯·è¾“å…¥å•†å“è¯¦æƒ…",type:"textarea",clearable:""},null,8,["modelValue"]),(0,h.Wm)(Z,{label:"ðŸ’°ç§¯åˆ†ä»·æ ¼",modelValue:_.credit,"onUpdate:modelValue":a[7]||(a[7]=e=>_.credit=e),placeholder:"è¯·è¾“å…¥å•†å“ç§¯åˆ†ä»·æ ¼(æ•´æ•°)",clearable:""},null,8,["modelValue"]),(0,h.Wm)(Z,{label:"ðŸ§©å•†å“æ•°é‡",modelValue:_.num,"onUpdate:modelValue":a[8]||(a[8]=e=>_.num=e),placeholder:"è¯·è¾“å…¥å•†å“æ•°é‡",clearable:""},null,8,["modelValue"]),(0,h.Wm)(Z,{modelValue:_.useName,"onUpdate:modelValue":a[9]||(a[9]=e=>_.useName=e),"is-link":"",readonly:"",name:"picker",label:"ðŸ¤–å•†å“å¯¹è±¡",placeholder:"ç‚¹å‡»é€‰æ‹©å•†å“å¯¹è±¡",onClick:a[10]||(a[10]=e=>_.showPicker_1=!0)},null,8,["modelValue"]),(0,h.Wm)(N,{show:_.showPicker_1,"onUpdate:show":a[12]||(a[12]=e=>_.showPicker_1=e),position:"bottom"},{default:(0,h.w5)((()=>[(0,h.Wm)(L,{columns:_.userColumns,onConfirm:_.onConfirm_1,onCancel:a[11]||(a[11]=e=>_.showPicker_1=!1)},null,8,["columns","onConfirm"])])),_:1},8,["show"])])),_:1}),(0,h._)("div",C,[(0,h.Wm)(j,{class:"btn-reset",type:"default",onClick:_.resetItem},{default:(0,h.w5)((()=>[(0,h.Uk)("é‡ç½®")])),_:1},8,["onClick"]),(0,h.Wm)(j,{class:"btn-save",color:"#F19290",type:"primary",onClick:_.saveItem},{default:(0,h.w5)((()=>[(0,h.Uk)("ä¿å­˜")])),_:1},8,["onClick"])])]),(0,h.Wm)(F,{show:_.show,"onUpdate:show":a[13]||(a[13]=e=>_.show=e),title:"ðŸ¥° æ¸©é¦¨æç¤º",message:_.message,"show-cancel-button":!1},null,8,["show","message"]),(0,h.Wm)(F,{show:_.show_1,"onUpdate:show":a[14]||(a[14]=e=>_.show_1=e),title:"ðŸ¥°æ­å–œ",message:_.message,width:"70vw",height:"30vw","show-cancel-button":!1,"show-confirm-button":!1},null,8,["show","message"])])],64)}var x=l(2262),V=l(6154),I=l.p+"img/Item.c2c222bd.gif",W=l(2119),P=l(6245),H={components:{VanField:i.ZP,VanForm:n.ZP,VanButton:t.ZP,VanSwipe:m.ZP,VanSwipeItem:v.Z},setup(){const e=(0,x.iH)(!1),a=(0,x.iH)(!1),l=(0,x.iH)(""),o=(0,x.iH)(!1),t=[I],n=(0,x.iH)([]),r=(0,x.iH)("æ— é¢„è®¾"),u=(0,x.iH)(""),i=(0,x.iH)(""),s=(0,x.iH)(""),c=(0,x.iH)(""),d=(0,x.iH)("");let m=(0,x.iH)("");const v=(0,x.iH)(!1),p=(0,W.tv)(),f=()=>p.replace("/Produce"),w=(0,x.iH)([]),g=(0,x.iH)(!1);(0,h.bv)((()=>{C(),_()}));const k=localStorage.getItem("jwtToken");k||p.replace("/login");const b={Authorization:`Bearer ${k}`};let y="";const C=()=>{V.Z.post("/api/loginToken?token="+k).then((e=>{if(0==e.data.code)return console.error(e.data.data),void p.replace("/login");const a=(0,P.Z)(k);y=a.id})).catch((e=>{console.error("è¯·æ±‚loginTokenæŽ¥å£å¤±è´¥",e),p.replace("/login")}))},_=async()=>{try{const e=await V.Z.get("/api/user",{headers:b}),a=e.data.data;w.value=a.filter((e=>e.nameId!==y)).map((e=>({text:e.name,value:e.nameId})))}catch(e){console.error("èŽ·å–ç”¨æˆ·æ•°æ®æ—¶å‡ºé”™",e)}},H=({selectedOptions:e})=>{c.value=e[0]?.text,g.value=!1},U=[{text:"æ— é¢„è®¾",value:"0"},{text:"è–¯ç‰‡",value:"1"},{text:"å¥¶èŒ¶åˆ¸",value:"2"},{text:"å¤œå®µåˆ¸",value:"3"},{text:"åšè¿åŠ¨",value:"4"},{text:"åƒé¡¿å¥½çš„",value:"5"},{text:"ä¸èµ–åºŠ",value:"6"},{text:"ä¹°å°ç¤¼ç‰©",value:"7"},{text:"è·‘è…¿åˆ¸",value:"8"},{text:"è¡£æœè£¤å­",value:"9"},{text:"å¥½çœ‹éž‹å­",value:"10"},{text:"å°åƒä¸€æ ·",value:"11"}],T=({selectedOptions:e})=>{v.value=!1,r.value=e[0].text,Z(r.value)},Z=e=>{"è–¯ç‰‡"===e?(u.value="ç¾Žå‘³è–¯ç‰‡",i.value="è¯±äººçš„é›¶é£Ÿï¼Œå¤œå®µç»ä½³ä¼´ä¾£ï¼Œå’”å˜£è„†ï¼å‡­æ­¤å•†å“å¯ä»¥å‘å¯¹æ–¹ç´¢è¦è–¯ç‰‡ã€‚"):"å¥¶èŒ¶åˆ¸"===e?(u.value="å¥¶èŒ¶æƒé™",i.value="å‡­æ­¤åˆ¸å¯ä»¥å‘å¯¹æ–¹ç´¢è¦ä¸€æ¯å¥¶èŒ¶ã€‚"):"å¤œå®µåˆ¸"===e?(u.value="å¤œå®µæ”¾å¼€é—¸",i.value="å‡­æ­¤åˆ¸å¯ä»¥è®©è‡ªå·±åœ¨å¤œé‡Œç‹‚é‡Žå¹²é¥­ã€‚"):"åšè¿åŠ¨"===e?(u.value="å‡è‚¥åˆ¸",i.value="å‡­æ­¤åˆ¸å¯ä»¥é€¼è¿«å¯¹æ–¹åšä¸€æ¬¡è¿åŠ¨ï¼Œä»¥æ­¤æ¥è¾¾åˆ°å‡è‚¥ç»´æŒå¥åº·çš„ç›®çš„ã€‚"):"åƒé¡¿å¥½çš„"===e?(u.value="é¥­ç¥¨",i.value="å‡­æ­¤åˆ¸å¯ä»¥è®©å¯¹æ–¹åšä¸€æ¬¡æˆ–è¯·ä¸€æ¬¡é¥­ï¼Œå…·ä½“è§†æƒ…å†µè€Œå®šã€‚"):"ä¸èµ–åºŠ"===e?(u.value="æ—©èµ·åˆ¸",i.value="å‡­æ­¤åˆ¸å¯ä»¥è®©å¯¹æ–¹æ—©èµ·åºŠä¸€æ¬¡ã€‚ç†¬å¤œå¯¹èº«ä½“å¾ˆä¸å¥½ï¼Œè¿˜æ˜¯è¦æ—©ç‚¹ç¡è§‰ç¬¬äºŒå¤©æ‰èƒ½æœ‰ç²¾ç¥žï¼"):"ä¹°å°ç¤¼ç‰©"===e?(u.value="å°ç¤¼ç‰©ç›’",i.value="å‡­æ­¤åˆ¸å¯ä»¥è®©å¯¹æ–¹ä¹°ç‚¹å°ç¤¼ç‰©ï¼Œåƒæ³¡æ³¡é©¬ç‰¹ä»€ä¹ˆçš„ã€‚"):"è·‘è…¿åˆ¸"===e?(u.value="è·‘è…¿å¬å”¤",i.value="æœ‰äº†æˆ‘ï¼Œä½ å†ä¹Ÿä¸éœ€è¦ç§»åŠ¨äº†ã€‚æ‹¿å¤–å–ï¼Œæ‹¿é›¶é£Ÿï¼Œå¼€ç©ºè°ƒï¼Œå¼€ç”µè§†ï¼Œåœ¨æ‰€ä¸è¾žã€‚"):"è¡£æœè£¤å­"===e?(u.value="è¡£æœè£¤å­åˆ¸",i.value="å‡­æ­¤åˆ¸å¯ä»¥è´­ä¹°è¡£æœæˆ–è€…è£¤å­ä¸€ä»¶ï¼Œä¹°å¥½çœ‹çš„è¡£æœï¼Œå˜å¾—æ›´å¥½çœ‹ï¼"):"å¥½çœ‹éž‹å­"===e?(u.value="å¥½çœ‹éž‹å­åˆ¸",i.value="å‡­æ­¤å·å¯ä»¥è´­ä¹°ä¸€åŒå¿ƒä»ªå·²ä¹…çš„éž‹å­ï¼Œä»·æ ¼çœ‹å…·ä½“æƒ…å†µè€Œå®šï¼"):"å°åƒä¸€æ ·"===e&&(u.value="å°åƒä¸€æ ·",i.value="å°å°å¥–åŠ±ä¸€ä¸‹è‡ªå·±ï¼Œå¯ä»¥åƒç‚¹å¥½åƒçš„ï¼Œæ”¾æ¾ä¸€ä¸‹ï¼")},L=e=>{e.status="uploading",e.message="ä¸Šä¼ ä¸­...";const a=new FormData;a.append("file",e.file),fetch("/api/upload",{method:"POST",headers:b,body:a}).then((e=>e.json())).then((a=>{m.value=a.data,e.message="ä¸Šä¼ æˆåŠŸ",e.status=""})).catch((e=>{console.error("ä¸Šä¼ å¤±è´¥ï¼š",e)}))},N=()=>{r.value="æ— é¢„è®¾",u.value="",i.value="",d.value="",s.value="",c.value=""},S=()=>{if(o.value=!0,""==i.value&&(i.value="ðŸ˜‚è¿™ä¸ªäººå¾ˆæ‡’ï¼Œæ²¡æœ‰å¡«å†™ç›¸å…³çš„å•†å“è¯¦æƒ…ï¼"),""==c.value||""==m.value||""==u.value)return l.value="è¯·å®Œæ•´å¡«å¥½ä¸Šè¿°ä¿¡æ¯ï¼",e.value=!0,void(o.value=!1);const t=parseFloat(d.value);if(!Number.isInteger(t))return l.value="ç§¯åˆ†åªèƒ½æ˜¯æ•´æ•°å“¦ï¼Œè¯·é‡æ–°è¾“å…¥ï¼",e.value=!0,void(o.value=!1);const n={produceName:u.value,founderId:y,produceText:i.value,produceImage:m.value,produceCredit:d.value,produceNum:s.value,customer:c.value};fetch("/api/addProduce",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${k}`},body:JSON.stringify(n)}).then((e=>{e.ok?(o.value=!1,l.value="ä¿å­˜å•†å“æˆåŠŸ!"):(console.error("ä¿å­˜å•†å“å¤±è´¥"),l.value="ä¿å­˜å•†å“å¤±è´¥!")})).catch((e=>{console.error("ä¿å­˜ä»»åŠ¡æ—¶å‡ºçŽ°é”™è¯¯:",e)})),a.value=!0,setTimeout((()=>{p.replace("/Produce")}),1e3),o.value=!1};return{show:e,show_1:a,message:l,isLoading:o,columns:U,onConfirm:T,showPicker:v,afterRead:L,fileList:n,presetIndex:r,title:u,desc:i,num:s,useName:c,credit:d,resetItem:N,saveItem:S,onClickLeft:f,images:t,userColumns:w,onConfirm_1:H,showPicker_1:g}}},U=l(3744);const T=(0,U.Z)(H,[["render",_]]);var Z=T},6870:function(e,a,l){l(1958),l(368),l(6742)},5077:function(e,a,l){l(1958),l(368),l(2939),l(1771),l(9137),l(1088),l(5338),l(1564),l(6565),l(1744)},2219:function(e,a,l){l(1958),l(368),l(6742),l(6196),l(2666)}}]);
//# sourceMappingURL=677.7767bcab.js.map